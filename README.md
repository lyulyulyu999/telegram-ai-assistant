# Telegram AI Assistant ğŸ¤–

**Telegram AI Assistant** - åŸºäº Telegram åŒ Bot æ¶æ„çš„ä¸ªäººçŸ¥è¯†ç®¡ç† + AI åŠ©ç†ç³»ç»Ÿ

é€šè¿‡ä¸¤ä¸ª Telegram Bot åä½œï¼Œå¸®åŠ©ä½ æ”¶é›†ã€æ•´ç†ã€æ£€ç´¢ä¸ªäººçŸ¥è¯†ï¼Œå¹¶æä¾›æ™ºèƒ½åŒ–çš„ AI äº¤äº’ä½“éªŒã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **ğŸ“¥ æ”¶é›† Bot**: é™é»˜ä¿å­˜ç¬”è®°ã€æƒ³æ³•ã€é“¾æ¥ï¼ŒAI è‡ªåŠ¨åé¦ˆ
- **ğŸ› æ§åˆ¶ Bot**: é…ç½®ä¸­å¿ƒ + AI å¯¹è¯ + æœç´¢ + è‰ç¨¿ç”Ÿæˆ
- **ğŸŒ Web ç®¡ç†åå°**: å¯è§†åŒ–é…ç½®æç¤ºè¯ã€æ¨¡å‹ã€åŠŸèƒ½å¼€å…³
- **ğŸ” è¯­ä¹‰æœç´¢**: åŸºäº ChromaDB çš„å‘é‡æ£€ç´¢
- **ğŸ¤– å¤šæ¨¡å‹æ”¯æŒ**: Claude / GPT / Gemini / Llama è‡ªç”±åˆ‡æ¢
- **ğŸ“„ RAG è‰ç¨¿**: åŸºäºç¬”è®°åº“è‡ªåŠ¨ç”Ÿæˆå†…å®¹

## ğŸ— ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot 1 (æ”¶é›†)   â”‚     â”‚   Bot 2 (æ§åˆ¶)   â”‚
â”‚   é™é»˜ä¿å­˜ç¬”è®°   â”‚     â”‚   AIå¯¹è¯/é…ç½®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  Node.js    â”‚
              â”‚  åç«¯æœåŠ¡    â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚           â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ChromaDB â”‚ â”‚OpenRouterâ”‚ â”‚Web Adminâ”‚
    â”‚å‘é‡æ•°æ®åº“â”‚ â”‚  AI API  â”‚ â”‚ç®¡ç†åå° â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- Docker (ç”¨äº ChromaDB)
- ä¸¤ä¸ª Telegram Bot Token
- OpenRouter API Key

### ä¸€ã€è·å–å¿…è¦çš„ Token å’Œ Key

#### 1. åˆ›å»º Telegram Bot (éœ€è¦ä¸¤ä¸ª)

1. åœ¨ Telegram æœç´¢ [@BotFather](https://t.me/BotFather)
2. å‘é€ `/newbot`ï¼ŒæŒ‰æç¤ºåˆ›å»º Bot
3. ä¿å­˜ Bot Tokenï¼ˆæ ¼å¼ï¼š`123456789:ABCdefGHI...`ï¼‰
4. **é‡å¤ä¸Šè¿°æ­¥éª¤åˆ›å»ºç¬¬äºŒä¸ª Bot**

> ğŸ’¡ å»ºè®®å‘½åï¼š
> - Bot 1: `XXX_Input_Bot` (æ”¶é›†ä¿¡æ¯)
> - Bot 2: `XXX_Assistant_Bot` (AI åŠ©ç†)

#### 2. è·å– OpenRouter API Key

1. è®¿é—® [OpenRouter](https://openrouter.ai/)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åœ¨ [Keys é¡µé¢](https://openrouter.ai/keys) åˆ›å»º API Key
4. ä¿å­˜ API Key

### äºŒã€å®‰è£…éƒ¨ç½²

#### æ–¹å¼ä¸€ï¼šDocker Compose (æ¨è)

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/lyulyulyu999/telegram-ai-assistant.git
cd telegram-ai-assistant

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å†™ä½ çš„é…ç½®

# 3. ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# 5. åœæ­¢æœåŠ¡
docker compose down
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/lyulyulyu999/telegram-ai-assistant.git
cd telegram-ai-assistant

# 2. ä¸€é”®é…ç½®ï¼ˆå¡«å†™æ‰€æœ‰ Token å’Œ Keyï¼‰
./scripts/setup.sh

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
./scripts/start.sh

# æˆ–è€…ä½¿ç”¨ npm workspaces
npm install
npm start
```

### ä¸‰ã€é…ç½®è¯´æ˜

è¿è¡Œ `setup.sh` æˆ–ç¼–è¾‘ `.env` æ—¶éœ€è¦å¡«å†™ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| INPUT_BOT_TOKEN | Bot 1 çš„ Token | `123456:ABC...` |
| OUTPUT_BOT_TOKEN | Bot 2 çš„ Token | `789012:DEF...` |
| OPENROUTER_API_KEY | OpenRouter API Key | `sk-or-v1-...` |
| WEBHOOK_URL | HTTPS Webhook åœ°å€ | `https://xxx.loca.lt` |

## ğŸ“– ä½¿ç”¨æŒ‡å—

### Bot 1 (æ”¶é›† Bot)

ç›´æ¥å‘é€ä»»ä½•å†…å®¹å³å¯ä¿å­˜ï¼š
- ğŸ“ æ–‡å­—ç¬”è®°
- ğŸ”— é“¾æ¥
- ğŸ’¡ æƒ³æ³•çµæ„Ÿ

**å‘½ä»¤ï¼š**
- `/start` - æŸ¥çœ‹å¸®åŠ©
- `/stats` - æŸ¥çœ‹ç»Ÿè®¡

### Bot 2 (æ§åˆ¶ Bot)

**å‘½ä»¤ï¼š**
- `/start` æˆ– `/menu` - æ‰“å¼€æ§åˆ¶å°

**æ§åˆ¶å°åŠŸèƒ½ï¼š**
- ğŸ“ æç¤ºè¯ç®¡ç† - åˆ›å»º/ç¼–è¾‘/åˆ‡æ¢ AI äººæ ¼
- ğŸ¤– åˆ‡æ¢æ¨¡å‹ - é€‰æ‹©ä¸åŒçš„ AI æ¨¡å‹
- ğŸ’¬ AI å¯¹è¯ - å¼€å¯/å…³é—­å¯¹è¯æ¨¡å¼
- ğŸ” æœç´¢ - è¯­ä¹‰æœç´¢ç¬”è®°
- ğŸ“„ è‰ç¨¿ - åŸºäºç¬”è®°ç”Ÿæˆå†…å®¹
- ğŸ“Š ç»Ÿè®¡ - æŸ¥çœ‹ç¬”è®°æ•°é‡

### Web ç®¡ç†åå°

è®¿é—® `http://ä½ çš„æœåŠ¡å™¨IP:3001`

åŠŸèƒ½ï¼š
- ğŸ“Š ä»ªè¡¨ç›˜ - ç»Ÿè®¡æ¦‚è§ˆ
- ğŸ“ æç¤ºè¯ç®¡ç† - å¯è§†åŒ–ç¼–è¾‘
- ğŸ¤– æ¨¡å‹è®¾ç½® - ä¸ºä¸åŒåŠŸèƒ½é…ç½®æ¨¡å‹
- âš™ï¸ Bot è®¾ç½® - åŠŸèƒ½å¼€å…³
- ğŸ”„ ç‰ˆæœ¬ç®¡ç† - é…ç½®å¿«ç…§

## ğŸ”§ é«˜çº§é…ç½®

### ç«¯å£è¯´æ˜

| æœåŠ¡ | é»˜è®¤ç«¯å£ | è¯´æ˜ |
|------|----------|------|
| Bot æœåŠ¡ | 3000 | Telegram Webhook æ¥æ”¶ |
| ç®¡ç†åå° | 3001 | Web ç®¡ç†ç•Œé¢ |
| ChromaDB | 8000 | å‘é‡æ•°æ®åº“ |

### ä½¿ç”¨ HTTPS (Webhook å¿…éœ€)

Telegram Webhook è¦æ±‚ HTTPSã€‚å¼€å‘ç¯å¢ƒæ¨èä½¿ç”¨ **localtunnel**ï¼ˆæ— éœ€æ³¨å†Œï¼‰ï¼š

```bash
# å®‰è£…
npm install -g localtunnel

# å¯åŠ¨ï¼ˆåœ¨æ–°ç»ˆç«¯ï¼‰
lt --port 3000
```

æˆ–ä½¿ç”¨ **ngrok**ï¼š

```bash
# å®‰è£…åå¯åŠ¨
ngrok http 3000
```

è·å– HTTPS URL åï¼Œæ›´æ–° `.env` ä¸­çš„ `WEBHOOK_URL`ã€‚

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

æ¨èä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹ï¼š

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
pm2 start scripts/ecosystem.config.js

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
telegram-ai-assistant/
â”œâ”€â”€ packages/               # Monorepo åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ bot/               # Telegram Bot ä»£ç 
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ index.js   # ä¸»ç¨‹åº
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ admin/             # Web ç®¡ç†åå°
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ server.js  # åç«¯æœåŠ¡
â”‚       â”œâ”€â”€ public/        # å‰ç«¯æ–‡ä»¶
â”‚       â””â”€â”€ data/          # é…ç½®æ•°æ®
â”œâ”€â”€ scripts/              # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ setup.sh          # ä¸€é”®é…ç½®
â”‚   â”œâ”€â”€ start.sh          # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh           # åœæ­¢è„šæœ¬
â”‚   â””â”€â”€ ecosystem.config.js # PM2 é…ç½®
â”œâ”€â”€ docker/               # Docker é…ç½®
â”‚   â””â”€â”€ Dockerfile        # å¤šé˜¶æ®µæ„å»º
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â””â”€â”€ TROUBLESHOOTING.md # æ•…éšœæ’é™¤
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ docker-compose.yml    # Docker Compose é…ç½®
â”œâ”€â”€ package.json          # æ ¹ package.json (workspaces)
â”œâ”€â”€ CONTRIBUTING.md       # è´¡çŒ®æŒ‡å—
â””â”€â”€ README.md
```

## â— å¸¸è§é—®é¢˜

è¯¦ç»†é—®é¢˜è¯·æŸ¥çœ‹ [æ•…éšœæ’é™¤æ–‡æ¡£](docs/TROUBLESHOOTING.md)

### Q: æŒ‰é’®ç‚¹å‡»æ²¡æœ‰ååº”

**åŸå› **: Webhook æ²¡æœ‰åŒ…å« `callback_query` ç±»å‹

**è§£å†³**:
```bash
source .env
curl "https://api.telegram.org/bot$OUTPUT_BOT_TOKEN/setWebhook" \
  -d "url=$WEBHOOK_URL/webhook/output" \
  -d 'allowed_updates=["message","callback_query"]'
```

### Q: Docker éƒ¨ç½²é—®é¢˜

```bash
# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# é‡å¯æœåŠ¡
docker compose restart

# é‡æ–°æ„å»º
docker compose up -d --build
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

è¯¦ç»†è´¡çŒ®æŒ‡å—è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)

## ğŸ“„ å¼€æºåè®®

[MIT License](LICENSE)


å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Star â­ï¸
